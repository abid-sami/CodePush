<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CodePush â€” Secure GitHub Uploader</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-theme" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<style>
/* â”€â”€ Variables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --bg:        #0a0c10;
  --surface:   #10141c;
  --surface2:  #161b26;
  --border:    #1e2738;
  --border2:   #263348;
  --accent:    #00e5a0;
  --accent2:   #0098ff;
  --danger:    #ff4d6a;
  --warn:      #ffb830;
  --text:      #e2e8f4;
  --text-dim:  #6b7fa3;
  --text-faint:#3a4a6a;
  --card-glow: 0 0 0 1px var(--border), 0 8px 32px rgba(0,0,0,.5);
  --radius:    12px;
  --font-mono: 'JetBrains Mono', monospace;
  --font-ui:   'Syne', sans-serif;
}

[data-theme="light"] {
  --bg:        #f0f2f7;
  --surface:   #ffffff;
  --surface2:  #f7f8fc;
  --border:    #dde2ee;
  --border2:   #c8d0e4;
  --text:      #1a2040;
  --text-dim:  #5a6a8a;
  --text-faint:#b0bcd0;
  --card-glow: 0 0 0 1px var(--border), 0 8px 32px rgba(0,0,0,.08);
}

/* â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { height: 100%; }
body {
  min-height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-ui);
  line-height: 1.6;
  transition: background .3s, color .3s;
}

/* â”€â”€ Noise texture overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
  opacity: .5;
}

/* â”€â”€ Grid Background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: 
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 48px 48px;
  opacity: .3;
  pointer-events: none;
  z-index: 0;
}

/* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app {
  position: relative;
  z-index: 1;
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 24px 48px;
}

/* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px 0 20px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 32px;
  gap: 16px;
  flex-wrap: wrap;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo-icon {
  width: 38px;
  height: 38px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 10px;
  display: grid;
  place-items: center;
  font-size: 18px;
  box-shadow: 0 0 20px rgba(0,229,160,.25);
  flex-shrink: 0;
}

.logo h1 {
  font-size: 22px;
  font-weight: 800;
  letter-spacing: -.5px;
  background: linear-gradient(135deg, var(--text) 30%, var(--text-dim));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.logo span {
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--accent);
  background: rgba(0,229,160,.1);
  border: 1px solid rgba(0,229,160,.25);
  border-radius: 4px;
  padding: 2px 7px;
  letter-spacing: .05em;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Status pill */
.status-pill {
  display: flex;
  align-items: center;
  gap: 7px;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-dim);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 5px 12px;
}

.status-dot {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--text-faint);
  transition: background .3s;
}

.status-dot.ok { background: var(--accent); box-shadow: 0 0 8px var(--accent); animation: pulse 2s infinite; }
.status-dot.err { background: var(--danger); }

@keyframes pulse {
  0%,100% { opacity: 1; }
  50% { opacity: .4; }
}

/* Theme toggle */
.theme-btn {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-dim);
  cursor: pointer;
  font-size: 16px;
  display: grid;
  place-items: center;
  transition: all .2s;
}

.theme-btn:hover { border-color: var(--accent); color: var(--accent); }

/* â”€â”€ Two-column grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.panels {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

@media (max-width: 900px) {
  .panels { grid-template-columns: 1fr; }
}

/* â”€â”€ Panel card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--card-glow);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.panel-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
  background: var(--surface2);
}

.panel-icon {
  width: 28px;
  height: 28px;
  border-radius: 7px;
  display: grid;
  place-items: center;
  font-size: 14px;
  flex-shrink: 0;
}

.panel-icon.green { background: rgba(0,229,160,.12); }
.panel-icon.blue  { background: rgba(0,152,255,.12); }

.panel-title {
  font-size: 13px;
  font-weight: 700;
  letter-spacing: .02em;
  color: var(--text);
}

.panel-sub {
  font-size: 11px;
  color: var(--text-dim);
  font-family: var(--font-mono);
}

.panel-body {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  flex: 1;
}

/* â”€â”€ Form controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--text-dim);
  margin-bottom: 6px;
}

input[type="text"],
select,
textarea {
  width: 100%;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 13px;
  padding: 10px 13px;
  outline: none;
  transition: border-color .2s, box-shadow .2s;
  appearance: none;
}

input[type="text"]:focus,
select:focus,
textarea:focus {
  border-color: var(--accent2);
  box-shadow: 0 0 0 3px rgba(0,152,255,.12);
}

select {
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7fa3' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
}

/* â”€â”€ Row layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.row-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

/* â”€â”€ Code Editor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.editor-wrap {
  position: relative;
  border: 1px solid var(--border);
  border-radius: 8px;
  overflow: hidden;
  background: #0d1117;
  transition: border-color .2s;
}

.editor-wrap:focus-within {
  border-color: var(--accent2);
  box-shadow: 0 0 0 3px rgba(0,152,255,.1);
}

.editor-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: #0a0e15;
  border-bottom: 1px solid var(--border);
}

.editor-dots {
  display: flex;
  gap: 6px;
}

.editor-dots span {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.editor-dots span:nth-child(1) { background: #ff5f57; }
.editor-dots span:nth-child(2) { background: #febc2e; }
.editor-dots span:nth-child(3) { background: #28c840; }

.editor-lang-badge {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-dim);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 2px 8px;
}

.editor-copy-btn {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-dim);
  background: none;
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 3px 8px;
  cursor: pointer;
  transition: all .15s;
}

.editor-copy-btn:hover { color: var(--accent); border-color: var(--accent); }

#code-editor {
  width: 100%;
  min-height: 280px;
  max-height: 400px;
  background: transparent;
  border: none;
  border-radius: 0;
  color: #c9d1d9;
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.7;
  padding: 14px 16px;
  resize: vertical;
  tab-size: 2;
  outline: none;
}

#code-editor::placeholder { color: #3a4a6a; }

/* â”€â”€ Drag & Drop Zone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.drop-zone {
  position: relative;
  border: 2px dashed var(--border2);
  border-radius: 10px;
  padding: 36px 20px;
  text-align: center;
  cursor: pointer;
  transition: all .25s;
  background: var(--surface2);
  overflow: hidden;
}

.drop-zone::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 50%, rgba(0,229,160,.06) 0%, transparent 70%);
  opacity: 0;
  transition: opacity .3s;
}

.drop-zone:hover::before,
.drop-zone.dragging::before { opacity: 1; }

.drop-zone:hover,
.drop-zone.dragging {
  border-color: var(--accent);
  background: rgba(0,229,160,.04);
}

.drop-zone.dragging { transform: scale(1.01); }

#file-input { display: none; }

.drop-icon {
  font-size: 32px;
  margin-bottom: 10px;
  display: block;
  transition: transform .3s;
}

.drop-zone:hover .drop-icon { transform: translateY(-4px) scale(1.1); }

.drop-title {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 4px;
}

.drop-sub {
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--text-dim);
}

.drop-sub em {
  color: var(--accent);
  font-style: normal;
  text-decoration: underline;
  cursor: pointer;
}

/* â”€â”€ File list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.file-list {
  display: flex;
  flex-direction: column;
  gap: 7px;
  max-height: 200px;
  overflow-y: auto;
}

.file-list:empty::after {
  content: 'No files selected';
  color: var(--text-faint);
  font-family: var(--font-mono);
  font-size: 11px;
  text-align: center;
  padding: 8px;
  display: block;
}

.file-item {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 7px;
  padding: 8px 12px;
  font-family: var(--font-mono);
  font-size: 11px;
  animation: slide-in .2s ease;
}

@keyframes slide-in {
  from { opacity: 0; transform: translateY(-6px); }
  to   { opacity: 1; transform: translateY(0); }
}

.file-icon {
  width: 26px;
  height: 26px;
  border-radius: 5px;
  display: grid;
  place-items: center;
  font-size: 12px;
  flex-shrink: 0;
}

.file-name { flex: 1; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.file-size { color: var(--text-dim); white-space: nowrap; }
.file-ext  {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: .05em;
  padding: 2px 5px;
  border-radius: 3px;
  background: rgba(0,229,160,.1);
  color: var(--accent);
  border: 1px solid rgba(0,229,160,.2);
}

.file-remove {
  background: none;
  border: none;
  color: var(--text-faint);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  padding: 0;
  transition: color .15s;
  flex-shrink: 0;
}

.file-remove:hover { color: var(--danger); }

/* â”€â”€ Buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-family: var(--font-ui);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: .04em;
  cursor: pointer;
  transition: all .2s;
  position: relative;
  overflow: hidden;
}

.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  background: white;
  opacity: 0;
  transition: opacity .15s;
}

.btn:active::after { opacity: .08; }

.btn-primary {
  background: linear-gradient(135deg, var(--accent) 0%, #00c484 100%);
  color: #0a1a12;
  box-shadow: 0 4px 16px rgba(0,229,160,.3);
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 24px rgba(0,229,160,.4);
}

.btn-secondary {
  background: linear-gradient(135deg, var(--accent2) 0%, #0070cc 100%);
  color: #fff;
  box-shadow: 0 4px 16px rgba(0,152,255,.25);
}

.btn-secondary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 24px rgba(0,152,255,.35);
}

.btn:disabled {
  opacity: .5;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

/* Spinner inside button */
.btn .spinner {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(255,255,255,.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin .7s linear infinite;
}

.btn-primary .spinner {
  border-color: rgba(0,26,18,.3);
  border-top-color: #0a1a12;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€ Progress bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.progress-wrap {
  height: 3px;
  background: var(--border);
  border-radius: 2px;
  overflow: hidden;
  display: none;
}

.progress-wrap.visible { display: block; }

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  width: 0;
  border-radius: 2px;
  transition: width .3s ease;
}

/* â”€â”€ Toast / Alert â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast-wrap {
  position: fixed;
  bottom: 28px;
  right: 28px;
  display: flex;
  flex-direction: column-reverse;
  gap: 10px;
  z-index: 999;
  pointer-events: none;
}

.toast {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  font-size: 13px;
  box-shadow: 0 8px 32px rgba(0,0,0,.4);
  max-width: 380px;
  pointer-events: auto;
  animation: toast-in .3s cubic-bezier(.34,1.56,.64,1);
}

@keyframes toast-in {
  from { opacity: 0; transform: translateY(20px) scale(.95); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

.toast.out {
  animation: toast-out .3s ease forwards;
}

@keyframes toast-out {
  to { opacity: 0; transform: translateY(10px) scale(.95); }
}

.toast-icon { font-size: 18px; line-height: 1; flex-shrink: 0; margin-top: 1px; }

.toast-content { flex: 1; }
.toast-title { font-weight: 700; margin-bottom: 3px; }
.toast-msg { color: var(--text-dim); font-size: 12px; line-height: 1.5; }

.toast-link {
  display: inline-block;
  margin-top: 6px;
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--accent);
  text-decoration: none;
  border: 1px solid rgba(0,229,160,.3);
  border-radius: 4px;
  padding: 2px 8px;
  transition: background .15s;
}

.toast-link:hover { background: rgba(0,229,160,.1); }

.toast.success { border-color: rgba(0,229,160,.3); }
.toast.error   { border-color: rgba(255,77,106,.3); }
.toast.info    { border-color: rgba(0,152,255,.3); }

/* â”€â”€ Stats bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.stats-bar {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.stat-chip {
  display: flex;
  align-items: center;
  gap: 7px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 14px;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-dim);
  flex: 1;
  min-width: 100px;
}

.stat-val {
  font-size: 18px;
  font-weight: 700;
  color: var(--text);
  font-family: var(--font-ui);
  line-height: 1;
}

/* â”€â”€ Allowed types bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.types-bar {
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
}

.type-tag {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-dim);
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 3px 7px;
}

/* â”€â”€ Char counter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.char-count {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-faint);
  text-align: right;
  margin-top: -8px;
}

/* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-faint); }

/* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
footer {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px 0;
  margin-top: 32px;
  border-top: 1px solid var(--border);
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-faint);
  flex-wrap: wrap;
  gap: 8px;
}

footer strong { color: var(--accent); }
</style>
</head>

<body>
<div class="app">

  <!-- â”€â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <header>
    <div class="logo">
      <div class="logo-icon">âš¡</div>
      <div>
        <h1>CodePush</h1>
      </div>
      
    </div>

    <div class="header-right">
      <div class="status-pill">
        <div class="status-dot" id="status-dot"></div>
        <span id="status-text">checkingâ€¦</span>
      </div>
      <button class="theme-btn" id="theme-btn" title="Toggle theme">ğŸŒ™</button>
    </div>
  </header>

  <!-- â”€â”€â”€ Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="stats-bar" style="margin-bottom:20px">
    <div class="stat-chip">
      <div>
        <div class="stat-val" id="stat-uploads">0</div>
        <div>uploads</div>
      </div>
    </div>
    <div class="stat-chip">
      <div>
        <div class="stat-val" id="stat-files">0</div>
        <div>files pushed</div>
      </div>
    </div>
    <div class="stat-chip" style="flex:3">
      <div style="width:100%">
        <div style="margin-bottom:4px">Allowed types</div>
        <div class="types-bar">
          <span class="type-tag">.cpp</span><span class="type-tag">.py</span>
          <span class="type-tag">.html</span><span class="type-tag">.css</span>
          <span class="type-tag">.js</span><span class="type-tag">.ts</span>
          <span class="type-tag">.json</span><span class="type-tag">.md</span>
          <span class="type-tag">.txt</span><span class="type-tag">.jsx</span>
          <span class="type-tag">.pkt</span><span class="type-tag">.jpg</span>
          <span class="type-tag">.png</span><span class="type-tag">.mp4</span>
          <span class="type-tag">.pdf</span><span class="type-tag">.docs</span>
          <span class="type-tag">.tsx</span>
        </div>
      </div>
    </div>
  </div>

  <!-- â”€â”€â”€ Two panels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="panels">

    <!-- â•â• Panel 1: Code Editor â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel">
      <div class="panel-header">
        <div class="panel-icon green">âœï¸</div>
        <div>
          <div class="panel-title">Manual Code Upload</div>
          <div class="panel-sub">Write or paste code â†’ push to GitHub</div>
        </div>
      </div>

      <div class="panel-body">
        <!-- Language + Filename -->
        <div class="row-2">
          <div>
            <label for="lang-select">Language</label>
            <select id="lang-select">
              <option value="cpp">C++</option>
              <option value="python">Python</option>
              <option value="javascript">JavaScript</option>
              <option value="html">HTML</option>
              <option value="css">CSS</option>
              <option value="typescript">TypeScript</option>
              <option value="json">JSON</option>
              <option value="markdown">Markdown</option>
              <option value="plaintext">Plain Text</option>
            </select>
          </div>
          <div>
            <label for="filename-input">File Name</label>
            <input type="text" id="filename-input" placeholder="main.cpp" spellcheck="false" />
          </div>
        </div>

        <!-- Code Editor -->
        <div>
          <label>Your Code</label>
          <div class="editor-wrap">
            <div class="editor-toolbar">
              <div class="editor-dots">
                <span></span><span></span><span></span>
              </div>
              <span class="editor-lang-badge" id="editor-lang-badge">C++</span>
              <button class="editor-copy-btn" id="copy-btn">â˜ copy</button>
            </div>
            <textarea id="code-editor" spellcheck="false" autocomplete="off" placeholder="// Paste or write your code hereâ€¦"></textarea>
          </div>
          <br/>
          <div class="char-count" id="char-count">0 chars</div>
        </div>

        <!-- Commit message -->
        <div>
          <label for="code-commit-msg">Commit Message</label>
          <input type="text" id="code-commit-msg" placeholder="Add feature / Fix bugâ€¦" />
        </div>

        <!-- Progress -->
        <div class="progress-wrap" id="code-progress-wrap">
          <div class="progress-bar" id="code-progress-bar"></div>
        </div>

        <!-- Submit -->
        <button class="btn btn-primary" id="code-submit-btn">
          <span id="code-btn-icon">âš¡</span>
          <span id="code-btn-text">Push to GitHub</span>
        </button>
      </div>
    </div>

    <!-- â•â• Panel 2: File Upload â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="panel">
      <div class="panel-header">
        <div class="panel-icon blue">ğŸ“</div>
        <div>
          <div class="panel-title">File Upload</div>
          <div class="panel-sub">Drag & drop files â†’ push to GitHub</div>
        </div>
      </div>

      <div class="panel-body">
        <!-- Drop zone -->
        <div class="drop-zone" id="drop-zone">
          <input type="file" id="file-input" multiple />
          <span class="drop-icon">ğŸ“‚</span>
          <div class="drop-title">Drop your files here</div>
          <div class="drop-sub">or <em onclick="document.getElementById('file-input').click()">browse files</em> &nbsp;Â·&nbsp; any file type â€¢ max 5MB each</div>
        </div>

        <!-- File list -->
        <div>
          <label>Selected Files <span id="file-count-badge" style="font-family:var(--font-mono);font-size:10px;background:rgba(0,152,255,.15);color:var(--accent2);border-radius:3px;padding:1px 6px;display:none"></span></label>
          <div class="file-list" id="file-list"></div>
        </div>

        <!-- Commit message -->
        <div>
          <label for="file-commit-msg">Commit Message</label>
          <input type="text" id="file-commit-msg" placeholder="Upload files via CodePushâ€¦" />
        </div>

        <!-- Progress -->
        <div class="progress-wrap" id="file-progress-wrap">
          <div class="progress-bar" id="file-progress-bar"></div>
        </div>

        <!-- Upload button -->
        <button class="btn btn-secondary" id="file-submit-btn">
          <span id="file-btn-icon">ğŸš€</span>
          <span id="file-btn-text">Upload Files to GitHub</span>
        </button>
      </div>
    </div>

  </div><!-- /panels -->

  <footer>
    <span>CodePush &copy; <script>document.write(new Date().getFullYear())</script> â€” Developed by <strong>Ragib Hasan Abid Sami</strong></span>
    
  </footer>

</div><!-- /app -->

<!-- Toast container -->
<div class="toast-wrap" id="toast-wrap"></div>

<script>
// â”€â”€ Theme â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const themeBtn = document.getElementById('theme-btn');
let dark = true;

function applyTheme() {
  document.documentElement.setAttribute('data-theme', dark ? 'dark' : 'light');
  themeBtn.textContent = dark ? 'ğŸŒ™' : 'â˜€ï¸';
  const hljsLink = document.getElementById('hljs-theme');
  hljsLink.href = dark
    ? 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css'
    : 'https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css';
}

themeBtn.addEventListener('click', () => { dark = !dark; applyTheme(); });
applyTheme();

// â”€â”€ Session stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let sessionUploads = 0, sessionFiles = 0;

function updateStats(filesCount = 1) {
  sessionUploads++;
  sessionFiles += filesCount;
  document.getElementById('stat-uploads').textContent = sessionUploads;
  document.getElementById('stat-files').textContent = sessionFiles;
}

// â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(type, title, msg, link) {
  const wrap = document.getElementById('toast-wrap');
  const icons = { success: 'âœ…', error: 'âŒ', info: 'â„¹ï¸' };
  const t = document.createElement('div');
  t.className = `toast ${type}`;
  t.innerHTML = `
    <span class="toast-icon">${icons[type] || 'â„¹ï¸'}</span>
    <div class="toast-content">
      <div class="toast-title">${title}</div>
      <div class="toast-msg">${msg}</div>
      ${link ? `<a class="toast-link" href="${link}" target="_blank" rel="noopener">View commit â†—</a>` : ''}
    </div>`;
  wrap.appendChild(t);
  setTimeout(() => {
    t.classList.add('out');
    setTimeout(() => t.remove(), 350);
  }, type === 'error' ? 7000 : 5000);
}

// â”€â”€ Health check â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function checkHealth() {
  const dot = document.getElementById('status-dot');
  const txt = document.getElementById('status-text');
  try {
    const r = await fetch('/api/health');
    const d = await r.json();
    if (d.configured) {
      dot.className = 'status-dot ok';
      txt.textContent = 'connected';
    } else {
      dot.className = 'status-dot err';
      txt.textContent = 'misconfigured';
      showToast('error', 'GitHub not configured', 'Set GITHUB_TOKEN, GITHUB_OWNER, and GITHUB_REPO in your .env file.');
    }
  } catch {
    dot.className = 'status-dot err';
    txt.textContent = 'server offline';
    showToast('error', 'Server offline', 'Make sure the backend is running on port 3000.');
  }
}

checkHealth();

// â”€â”€ Progress helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function progressStart(wrapId, barId) {
  const w = document.getElementById(wrapId);
  const b = document.getElementById(barId);
  w.classList.add('visible');
  b.style.width = '0%';
  let pct = 0;
  const iv = setInterval(() => {
    pct = Math.min(pct + Math.random() * 12, 85);
    b.style.width = pct + '%';
  }, 150);
  return { finish: () => { clearInterval(iv); b.style.width = '100%'; setTimeout(() => w.classList.remove('visible'), 600); }};
}

function setLoading(iconId, textId, btnId, loading, defaultIcon, defaultText) {
  const btn = document.getElementById(btnId);
  const ico = document.getElementById(iconId);
  const txt = document.getElementById(textId);
  if (loading) {
    btn.disabled = true;
    ico.innerHTML = '<div class="spinner"></div>';
    txt.textContent = 'Pushingâ€¦';
  } else {
    btn.disabled = false;
    ico.textContent = defaultIcon;
    txt.textContent = defaultText;
  }
}

// â”€â”€ Code Editor section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const codeEditor = document.getElementById('code-editor');
const langSelect = document.getElementById('lang-select');
const langBadge  = document.getElementById('editor-lang-badge');
const charCount  = document.getElementById('char-count');

langSelect.addEventListener('change', () => {
  langBadge.textContent = langSelect.value;
  autoSetExtension();
});

codeEditor.addEventListener('input', () => {
  charCount.textContent = codeEditor.value.length.toLocaleString() + ' chars';
});

// Tab key in editor
codeEditor.addEventListener('keydown', e => {
  if (e.key === 'Tab') {
    e.preventDefault();
    const start = codeEditor.selectionStart;
    const end   = codeEditor.selectionEnd;
    codeEditor.value = codeEditor.value.substring(0, start) + '  ' + codeEditor.value.substring(end);
    codeEditor.selectionStart = codeEditor.selectionEnd = start + 2;
  }
});

// Auto-set extension from language
const langExtMap = {
  javascript: '.js', python: '.py', cpp: '.cpp', html: '.html',
  css: '.css', typescript: '.ts', json: '.json', markdown: '.md', plaintext: '.txt'
};

function autoSetExtension() {
  const fi = document.getElementById('filename-input');
  if (!fi.value) return;
  const parts = fi.value.split('.');
  if (parts.length > 1) parts.pop();
  fi.value = parts.join('.') + (langExtMap[langSelect.value] || '.txt');
}

langSelect.addEventListener('change', autoSetExtension);

// Copy button
document.getElementById('copy-btn').addEventListener('click', () => {
  navigator.clipboard.writeText(codeEditor.value).then(() => {
    const btn = document.getElementById('copy-btn');
    btn.textContent = 'âœ“ copied';
    setTimeout(() => btn.textContent = 'â˜ copy', 1500);
  });
});

// Submit code
document.getElementById('code-submit-btn').addEventListener('click', async () => {
  const filename  = document.getElementById('filename-input').value.trim();
  const content   = codeEditor.value;
  const commitMsg = document.getElementById('code-commit-msg').value.trim();
  const language  = langSelect.value;

  if (!filename) return showToast('error', 'Missing filename', 'Please enter a file name.');
  if (!content)  return showToast('error', 'Empty editor', 'Please write or paste some code.');

  setLoading('code-btn-icon', 'code-btn-text', 'code-submit-btn', true);
  const prog = progressStart('code-progress-wrap', 'code-progress-bar');

  try {
    const res = await fetch('/api/upload/code', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ filename, content, language, commitMessage: commitMsg })
    });
    const data = await res.json();
    prog.finish();

    if (res.ok) {
      updateStats(1);
      showToast('success', 'Pushed!', data.message, data.commitUrl);
      codeEditor.value = '';
      charCount.textContent = '0 chars';
      document.getElementById('code-commit-msg').value = '';
    } else {
      showToast('error', 'Push failed', data.error || 'Unknown error');
    }
  } catch (err) {
    prog.finish();
    showToast('error', 'Network error', err.message);
  }

  setLoading('code-btn-icon', 'code-btn-text', 'code-submit-btn', false, 'â¬†', 'Push to GitHub');
});

// â”€â”€ File Upload section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const dropZone  = document.getElementById('drop-zone');
const fileInput = document.getElementById('file-input');
const fileList  = document.getElementById('file-list');
let selectedFiles = [];

function formatSize(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / (1024*1024)).toFixed(1) + ' MB';
}

const extColors = {
  js:'.accent2', py:'#3776ab', cpp:'#004283', html:'#e34c26',
  css:'#1572b6', ts:'#3178c6', json:'#c0c0c0', md:'#ffffff', txt:'#c0c0c0'
};

function renderFileList() {
  fileList.innerHTML = '';
  const badge = document.getElementById('file-count-badge');
  if (selectedFiles.length === 0) { badge.style.display = 'none'; return; }
  badge.style.display = 'inline';
  badge.textContent = selectedFiles.length;

  selectedFiles.forEach((f, i) => {
    const ext = f.name.split('.').pop().toLowerCase();
    const item = document.createElement('div');
    item.className = 'file-item';
    item.innerHTML = `
      <div class="file-icon" style="background:rgba(0,152,255,.1)">ğŸ“„</div>
      <span class="file-name" title="${f.name}">${f.name}</span>
      <span class="file-ext">.${ext}</span>
      <span class="file-size">${formatSize(f.size)}</span>
      <button class="file-remove" title="Remove" data-idx="${i}">Ã—</button>`;
    fileList.appendChild(item);
  });

  fileList.querySelectorAll('.file-remove').forEach(btn => {
    btn.addEventListener('click', () => {
      selectedFiles.splice(parseInt(btn.dataset.idx), 1);
      renderFileList();
    });
  });
}

function addFiles(newFiles) {
  const allowed = ['.cpp','.py','.html','.css','.js','.ts','.json','.md','.txt','.jsx','.tsx'];
  const rejected = [];
  Array.from(newFiles).forEach(f => {
    const ext = '.' + f.name.split('.').pop().toLowerCase();
    if (!allowed.includes(ext)) { rejected.push(f.name); return; }
    if (!selectedFiles.find(x => x.name === f.name)) selectedFiles.push(f);
  });
  if (rejected.length) showToast('error', 'Rejected files', `Not allowed: ${rejected.join(', ')}`);
  renderFileList();
}

// Drag events
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragging'); });
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragging'));
dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.classList.remove('dragging');
  addFiles(e.dataTransfer.files);
});
dropZone.addEventListener('click', e => {
  if (e.target.tagName !== 'EM') fileInput.click();
});
fileInput.addEventListener('change', () => { addFiles(fileInput.files); fileInput.value = ''; });

// Submit files
document.getElementById('file-submit-btn').addEventListener('click', async () => {
  if (selectedFiles.length === 0) return showToast('error', 'No files', 'Please select files to upload.');

  const commitMsg = document.getElementById('file-commit-msg').value.trim();
  const fd = new FormData();
  selectedFiles.forEach(f => fd.append('files', f));
  fd.append('commitMessage', commitMsg);

  setLoading('file-btn-icon', 'file-btn-text', 'file-submit-btn', true);
  const prog = progressStart('file-progress-wrap', 'file-progress-bar');

  try {
    const res = await fetch('/api/upload/files', { method: 'POST', body: fd });
    const data = await res.json();
    prog.finish();

    if (res.ok) {
      updateStats(data.results.length);
      const firstUrl = data.results[0]?.commitUrl;
      showToast('success', 'Pushed!', data.message, firstUrl);
      selectedFiles = [];
      renderFileList();
      document.getElementById('file-commit-msg').value = '';
    } else {
      showToast('error', 'Push failed', data.error || 'Unknown error');
    }
  } catch (err) {
    prog.finish();
    showToast('error', 'Network error', err.message);
  }

  setLoading('file-btn-icon', 'file-btn-text', 'file-submit-btn', false, 'â¬†', 'Upload Files to GitHub');
});
</script>
</body>
</html>
